!function(a){a.gfV1StockCounter=function(b,c){var d={detectChange:function(){}};this.settings={};var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s=this,t=a(b);this.init=function(){if(this.settings=a.extend({},d,c),f=t.attr("data-quantity-source"),h=t.attr("data-fix-auto-remaining-quantity"),parseInt(h)<0){var b=t.attr("data-variant-id"),u=t.closest('[data-label="Product"]'),v=u.children(".module").attr("data-current-variant");void 0!=v&&""!=v&&(b=v),g=t.find(".gf-variants-quantity .gf-variant-"+b).html()}else g=h;return e=20,"manual"==f&&(g=g>0?t.attr("data-remaining-quantity"):0,e=t.attr("data-remaining-percentage")),i=t.attr("data-template"),j=t.attr("data-out-of-stock"),k=t.attr("data-color"),l=t.attr("data-always-show-up"),m=t.attr("data-scarcity-thresold"),n=t.attr("data-rounded-border"),o=t.attr("data-animation"),p=t.attr("data-show-icon"),q=t.attr("data-font-size"),r=t.attr("data-progress-bar-height"),s.render(),!1},this.initWithVariant=function(b){if(!a.isEmptyObject(b))try{var c=t.find(".gf-variants-quantity .gf-variant-"+b.id);if(0==c.length)return!1;var d=c.html();if("0"!=d&&"manual"==f&&(d=t.attr("data-remaining-quantity")),d=parseInt(d),isNaN(d))return!1;g=d,t.find(".gf_remaining-number").html(g);var e=t.find(".gf_progress-bar");return e.css("background-position","100%"),s.render(),!1}catch(h){console.log(h)}},this.render=function(){if(void 0==g)return!1;if(""!=i&&""!==g&&""!==e&&(1==parseInt(l)||parseInt(g)<=parseInt(m))){var a;if(parseInt(g)<=0?(a=j,e=0):(e="manual"==f?t.attr("data-remaining-percentage"):20,a="undefined"!=typeof i?i.replace("%number%",'<span class="remaining-number" style="color:'+k+'">'+g+"</span>"):""),1==parseInt(p)){var b=t.attr("data-choose-icon");try{a=atob(b)+a}catch(c){console.log(c)}}var d=t.find(".gf_scarcity-status"),h=t.find(".gf_progress-bar");d.html(a),"1"==n?h.addClass("rounded-border"):h.removeClass("rounded-border"),"1"==o?h.addClass("animation"):h.removeClass("animation"),d.css("font-size",q),d.children("mark").css("background-color",k),d.children(".gf_icon").css("color",k),h.css({height:r,"background-color":k}),setTimeout(function(){h.css("background-position",e+"%")},500)}return!1},this.init()},a.fn.gfV1StockCounter=function(b){return this.each(function(){if(void 0==a(this).data("gfv1stockcounter")){var c=new a.gfV1StockCounter(this,b);a(this).data("gfv1stockcounter",c)}})}}(jQuery);