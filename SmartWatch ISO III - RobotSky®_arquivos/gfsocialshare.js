!function(a){a.gfSocialShare=function(b,c){var d={mode:"production",shares:{facebook:{shareUrl:"https://facebook.com/sharer/sharer.php?u={url}",countUrl:"https://graph.facebook.com/?id={url}",getCount:function(a){return a.share&&a.share.share_count||0}},twitter:{shareUrl:"https://twitter.com/share?url={url}&text={text}",countUrl:""},pinterest:{shareUrl:"https://pinterest.com/pin/create/bookmarklet/?media={media}&url={url}&description={text}",countUrl:"https://api.pinterest.com/v1/urls/count.json?&url={url}&callback=?",getCount:function(a){return a.count}},googleplus:{shareUrl:"https://plus.google.com/share?url={url}",countUrl:""},email:{shareUrl:"mailto:?subject={text}&body={url}",countUrl:""},linkedin:{shareUrl:"https://www.linkedin.com/shareArticle?mini=true&url={url}",countUrl:"https://www.linkedin.com/countserv/count/share?format=jsonp&url={url}&callback=?",getCount:function(a){return a.count}}}};this.settings={};var e=a(b),f=this,g={G:1e9,M:1e6,K:1e3},h="production",i="",j="";this.init=function(){this.settings=a.extend({},d,c),h=a(".gryffeditor").hasClass("editing")?"dev":"production",f.initDefaults(),f.render()},this.initDefaults=function(){i=a.trim(a("meta[name=description]").attr("content")||a("title").text()),a(".gf_featured-image").length>0&&(j=a(".gf_featured-image").attr("src"))},this.render=function(){f.renderShares()},this.renderShares=function(){e.find(".gf_social").each(function(){var b=a(this).attr("title"),c=a(this).attr("data-sharein"),d=a(this),e=f.settings.shares[b];void 0!=e&&(e.title=b,e.shareIn=c,f.renderShare(d,e))}),a("body").off("click.socialshare").on("click.socialshare",function(b){if(a(b.target).closest("a.gf_social").length>0){var c=a(b.target).closest("a.gf_social"),d=a(b.target).closest('[data-label="Social Share"]'),e=d.children(".module"),g=c.attr("title"),h="";void 0!=e.attr("data-editlink")&&""!=a.trim(e.attr("data-editlink"))?(h=a.trim(e.attr("data-editlink")),h.indexOf("http")==-1&&h.indexOf("https")==-1&&(h=location.protocol+"//"+location.host+h)):h="";var i=f.getShareUrl(f.settings.shares[g],c,h);switch(c.attr("data-target")){case"popup":window.open(i,null,"width=600, height=400, location=0, menubar=0, resizeable=0, scrollbars=0, status=0, titlebar=0, toolbar=0");break;case"self":window.location.href=i;break;case"blank":default:window.open(i,null,"width=600, height=400, location=0, menubar=0, resizeable=0, scrollbars=0, status=0, titlebar=0, toolbar=0")}}})},this.renderShare=function(a,b){var c=a.find(".gf_social-count").length>0;return c&&void 0!=b.countUrl&&f.loadCount(b).done($.proxy(function(b){b?a.find(".gf_social-count").html(b):a.find(".gf_social-count").remove()},this)),!1},this.getShareUrl=function(b,c,d){if(!d||""==d){var e="",g=c.closest('[data-label="Product"]');if(g.length>0)try{var h=g.children(".module"),i={handle:""};if(h.find(".product-json").length>0)try{var j=h.children("form"),k=j.children('[name="id"]').attr("data-productid");if(h.find("#product-json"+k).length>0)var i=a.parseJSON(h.find("#product-json"+k).html());else var i=a.parseJSON(h.find(".product-json").html())}catch(l){console.log(l.message)}else try{var k=h.attr("data-pid");if(void 0!=window.parent.jQuery("#gfFrame").contents().find(".gryffeditor").data("gryffeditor"))var i=window.parent.jQuery("#gfFrame").contents().find(".gryffeditor").data("gryffeditor").searchProductInList(k)}catch(l){console.log(l.message)}e=location.protocol+"//"+location.host+"/products/"+i.handle}catch(m){console.log(m)}else{var n=c.closest('[data-label="Article"]');if(n.length>0)try{var o=n.find("a.gf_article-title").first();if(o.length>0){var p=JSON.parse(o.attr("href"));e=location.protocol+"//"+location.host+p}}catch(m){console.log(m)}}""==e&&(e=window.location.href),d=e}return f.formatShareUrl(d,b)},this.formatShareUrl=function(a,b){var a=b.shareUrl.replace("{url}",a).replace("{text}",i).replace("{media}",j);return a},this.loadCount=function(a){var b=$.Deferred(),c=f.getCountUrl(a);if(!c)return b.resolve(0).promise();var d=$.proxy(function(c){b.resolve(f.getCountValue(c,a))},this);return $.getJSON(c).done(d).fail(function(){$.get(c).done(d).fail(function(){b.resolve(0)})}),b.promise()},this.getCountUrl=function(a){var b=a.countUrl;return f.formatShareUrl(b,a)},this.getCountValue=function(b,c){var d=(a.isFunction(c.getCount)?c.getCount(b):b)||0;return"string"==typeof d?d:f.formatNumber(d)},this.formatNumber=function(b){return a.each(g,function(a,c){if(b>=c)return b=parseFloat((b/c).toFixed(2))+a,!1}),b},this.init()},a.fn.gfSocialShare=function(b){return this.each(function(){if(void 0==a(this).data("gfsocialshare")){var c=new a.gfSocialShare(this,b);a(this).data("gfsocialshare",c)}})}}(jQuery);